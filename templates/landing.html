{% extends 'base.html' %}
{% load static %}

{% block title %}Ticketera · Bienvenido{% endblock %}

{% block content %}
    <header class="header" style="display: flex; align-items: center; justify-content: flex-start; gap: 15px;">
         {# Logo imagen #}
        <img src="{% static 'img/logo png sin letras.png' %}" alt="Ticketera Logo" style="width: 32px; height: 32px; object-fit: contain;">
        {# Título de bienvenida #}
        <h1 class="page-title" style="margin: 0;">
            Bienvenido/a, {{ request.user.first_name|default:usuario.nombre|default:"Usuario" }}
        </h1>
    </header>

    {# Usamos el main solo para centrar la tarjeta única #}
    <main style="display: flex; justify-content: center; align-items: center; padding: 50px 16px; flex-grow: 1;">

        {# Tarjeta Única con Todo el Contenido #}
        <section class="card" style="padding: 40px; max-width: 700px; width: 100%; text-align: center;">

            {# Logo y Título con imagen real #}
            <div class="brand" style="display: inline-flex; align-items: center; color: var(--text); margin-bottom: 20px;">
                <img src="{% static 'img/logo png sin letras.png' %}" alt="Ticketera Prime Logo" style="width: 70px; height: 70px; object-fit: contain;">
                <div class="title" style="margin-left: 15px; text-align: left;">
                    <b style="font-size: 22px;">Ticketera Prime</b>
                    <small style="font-size: 16px;">Sistema de Helpdesk</small>
                </div>
            </div>

            {# Título e Introducción General #}
            <h2 style="margin-top: 15px; margin-bottom: 5px;">Plataforma de Soporte Técnico</h2>
            <p class="muted" style="margin-bottom: 25px;">Sistema de gestión de soporte técnico del colegio.</p>
            <hr style="border:0; border-top: 1px solid var(--line); margin: 25px 0;">

            {# Contenido Específico del Rol #}
            <div style="margin-top: 25px;">
                {% if usuario.rol.nombre == 'Docente' %}
                    <p>Como <strong>Docente</strong>, tu vista principal te permite crear nuevos tickets y ver el estado de los que ya has enviado.</p>
                    <a href="{% url 'mis_tickets' %}" class="btn-link" 
                    style="background: var(--indigo-800); color: #fff; padding: 12px 20px; font-size: 16px; margin-top: 15px; display: inline-block;"
                    onmouseover="this.style.backgroundColor='#fff'; this.style.color='var(--indigo-800)'; this.style.borderColor='var(--indigo-800)';" 
                    onmouseout="this.style.backgroundColor='var(--indigo-800)'; this.style.color='#fff'; this.style.borderColor='var(--indigo-800)';">
                        Ir a Mis Tickets (Crear/Ver)
                    </a>

                {% elif usuario.rol.nombre == 'TI' %}
                    <p>Como miembro del equipo de <strong>Soporte TI</strong>, aquí puedes ver y gestionar los tickets que te han sido asignados.</p>
                    <a href="{% url 'mis_asignaciones' %}" class="btn-link" 
                    style="background: var(--indigo-800); color: #fff; padding: 12px 20px; font-size: 16px; margin-top: 15px; display: inline-block;"
                    onmouseover="this.style.backgroundColor='#fff'; this.style.color='var(--indigo-800)'; this.style.borderColor='var(--indigo-800)';" 
                    onmouseout="this.style.backgroundColor='var(--indigo-800)'; this.style.color='#fff'; this.style.borderColor='var(--indigo-800)';">
                        Ir a Mis Asignaciones
                    </a>

                {% elif usuario.rol.nombre == 'Admin' %}
    <p>Como <strong>Administrador</strong>, tienes acceso al panel general, la gestión de todos los tickets y los reportes.</p>
    <div style="display: flex; flex-wrap: wrap; gap: 15px; justify-content: center; margin-top: 20px;">
        <a href="{% url 'panel_principal' %}" class="btn-link" 
        style="background: var(--indigo-800); color: #fff; border-color: var(--indigo-800); padding: 12px 20px;"
        onmouseover="this.style.backgroundColor='#fff'; this.style.color='var(--indigo-800)'; this.style.borderColor='var(--indigo-800)';" 
        onmouseout="this.style.backgroundColor='var(--indigo-800)'; this.style.color='#fff'; this.style.borderColor='var(--indigo-800)';">
            Panel Principal
        </a>
        <a href="{% url 'dashboard' %}" class="btn-link" 
        style="background: var(--indigo-800); color: #fff; border-color: var(--indigo-800); padding: 12px 20px;"
        onmouseover="this.style.backgroundColor='#fff'; this.style.color='var(--indigo-800)'; this.style.borderColor='var(--indigo-800)';" 
        onmouseout="this.style.backgroundColor='var(--indigo-800)'; this.style.color='#fff'; this.style.borderColor='var(--indigo-800)';">
            Gráficos
        </a>
        <a href="{% url 'ticket_list' %}" class="btn-link" 
        style="background: var(--indigo-800); color: #fff; border-color: var(--indigo-800); padding: 12px 20px;"
        onmouseover="this.style.backgroundColor='#fff'; this.style.color='var(--indigo-800)'; this.style.borderColor='var(--indigo-800)';" 
        onmouseout="this.style.backgroundColor='var(--indigo-800)'; this.style.color='#fff'; this.style.borderColor='var(--indigo-800)';">
            Gestionar Tickets
        </a>
        <a href="{% url 'reportes' %}" class="btn-link" 
        style="background: var(--indigo-800); color: #fff; border-color: var(--indigo-800); padding: 12px 20px;"
        onmouseover="this.style.backgroundColor='#fff'; this.style.color='var(--indigo-800)'; this.style.borderColor='var(--indigo-800)';" 
        onmouseout="this.style.backgroundColor='var(--indigo-800)'; this.style.color='#fff'; this.style.borderColor='var(--indigo-800)';">
            Reportes
        </a>
    </div>

                {% elif usuario.rol.nombre == 'Superadmin' %}
    <p>Como <strong>Superadministrador</strong>, tienes control total sobre usuarios, tickets, reportes y configuración del sistema.</p>
    <div style="display: flex; flex-wrap: wrap; gap: 15px; justify-content: center; margin-top: 20px;">
        <a href="{% url 'usuarios_list' %}" class="btn-link" 
        style="background: var(--indigo-800); color: #fff; border-color: var(--indigo-800); padding: 12px 20px;"
        onmouseover="this.style.backgroundColor='#fff'; this.style.color='var(--indigo-800)'; this.style.borderColor='var(--indigo-800)';" 
        onmouseout="this.style.backgroundColor='var(--indigo-800)'; this.style.color='#fff'; this.style.borderColor='var(--indigo-800)';">
            Gestión de Usuarios
        </a>
        <a href="{% url 'panel_principal' %}" class="btn-link" 
        style="background: var(--indigo-800); color: #fff; border-color: var(--indigo-800); padding: 12px 20px;"
        onmouseover="this.style.backgroundColor='#fff'; this.style.color='var(--indigo-800)'; this.style.borderColor='var(--indigo-800)';" 
        onmouseout="this.style.backgroundColor='var(--indigo-800)'; this.style.color='#fff'; this.style.borderColor='var(--indigo-800)';">
            Panel Principal
        </a>
        <a href="{% url 'ticket_list' %}" class="btn-link" 
        style="background: var(--indigo-800); color: #fff; border-color: var(--indigo-800); padding: 12px 20px;"
        onmouseover="this.style.backgroundColor='#fff'; this.style.color='var(--indigo-800)'; this.style.borderColor='var(--indigo-800)';" 
        onmouseout="this.style.backgroundColor='var(--indigo-800)'; this.style.color='#fff'; this.style.borderColor='var(--indigo-800)';">
            Gestionar Tickets
        </a>
        <a href="{% url 'dashboard' %}" class="btn-link" 
        style="background: var(--indigo-800); color: #fff; border-color: var(--indigo-800); padding: 12px 20px;"
        onmouseover="this.style.backgroundColor='#fff'; this.style.color='var(--indigo-800)'; this.style.borderColor='var(--indigo-800)';" 
        onmouseout="this.style.backgroundColor='var(--indigo-800)'; this.style.color='#fff'; this.style.borderColor='var(--indigo-800)';">
            Gráficos
        </a>
        <a href="{% url 'reportes' %}" class="btn-link" 
        style="background: var(--indigo-800); color: #fff; border-color: var(--indigo-800); padding: 12px 20px;"
        onmouseover="this.style.backgroundColor='#fff'; this.style.color='var(--indigo-800)'; this.style.borderColor='var(--indigo-800)';" 
        onmouseout="this.style.backgroundColor='var(--indigo-800)'; this.style.color='#fff'; this.style.borderColor='var(--indigo-800)';">
            Reportes
        </a>
    </div>

                {% elif request.user.is_superuser %}
                     <p>Como <strong>Superusuario</strong> de Django, puedes acceder al panel de administración.</p>
                     <a href="/admin/" class="btn-link" style="background: var(--indigo-800); color: #fff; padding: 12px 20px; font-size: 16px; margin-top: 15px; display: inline-block;">
                        Ir al Admin de Django
                    </a>

                {% else %}
                    <p class="muted">Tu rol no está definido correctamente. Contacta al administrador.</p>
                {% endif %}
            </div> {# Fin Contenido Específico del Rol #}

        </section> {# Fin Tarjeta Única #}

    </main>
{% endblock %}