/* ===================== */
/* 1) Variables & base   */
/* ===================== */
:root{
  --indigo-800:#2a0441; /* sidebar */
  --lavender:#b9a7d3;   /* acento lateral */
  --bg:#f4f6fb;         /* fondo app */
  --card:#ffffff;
  --line:#e7e8ee;
  --text:#1f2430;
  --muted:#6b6b7a;

  --blue:#2f73d9;
  --blue-100:#eaf1ff;
  --green:#2fb171;
  --red:#ea5573;
  --orange:#ff9c5b;

  --shadow:0 8px 24px rgba(22,22,26,.06);
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font:15px/1.35 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Arial;
  color:var(--text);
  background:linear-gradient(90deg,var(--lavender) 0 90px, var(--bg) 90px 100%);
}

/* ===================== */
/* 2) Elementos comunes  */
/* ===================== */

/* Sidebar (común) */
.sidebar{
  background:var(--indigo-800);
  color:#fff;
  padding:18px 14px;
  display:flex; flex-direction:column; 
  gap:14px;
}
.brand{display:flex;align-items:center;gap:10px}
.logo{width:38px;height:38px;border-radius:10px;background:#fff;color:var(--indigo-800);display:grid;place-items:center;font-weight:800}
.title b{display:block}
.title small{opacity:.8}
.nav-title{font-size:12px;opacity:.7;text-transform:uppercase;margin-top:8px}
.nav,.nav-block{display:flex;flex-direction:column;gap:6px}
.nav a,.nav-block a{
  color:#fff;text-decoration:none;padding:10px 12px;border-radius:10px;transition:.2s background;
}
.nav a:hover,.nav-block a:hover{background:rgba(255,255,255,.08)}
.nav a.active,.nav-block a.active{background:rgba(255,255,255,.16)}
.divider{height:1px;background:rgba(255,255,255,.12);margin:8px 0}
.search{margin-top:6px;padding:8px;border-radius:10px;background:rgba(255,255,255,.08)}
.search input{border:none;outline:none;background:transparent;color:#fff;width:100%}

/* --- Iconos SOLO en la sidebar --- */
.sidebar .nav a,
.sidebar .nav-block a {
  display: flex;
  align-items: center;
  gap: 10px;
}

.sidebar .nav a .ico,
.sidebar .nav-block a .ico {
  width: 18px;
  height: 18px;
  display: grid;
  place-items: center;
  flex: 0 0 18px;
}

.sidebar .nav svg,
.sidebar .nav-block svg {
  width: 18px;
  height: 18px;
  stroke: currentColor;
  fill: none;          /* importante: no rellenar */
  stroke-width: 2;
}


/* Header (común) */
.header{
  background:#fff; box-shadow:var(--shadow);
  display:flex; align-items:center; justify-content:space-between;
  padding:0 16px;
}
.page-title{margin:0; font-size:20px}
.filters{display:flex; gap:8px}
/* ===== ESTILOS PARA LOS SELECTORES DE FILTRO ===== */
.select {
  /* Mantenemos lo básico del div contenedor */
  border: 1px solid var(--line);
  border-radius: 8px;
  background-color: #fff; /* Fondo blanco */
  cursor: pointer;
  position: relative; /* Necesario para posicionar la flecha */
  min-width: 150px; /* Ancho mínimo */
  display: inline-block; /* Para que se alinee bien con otros filtros */
  transition: background-color 0.2s ease, border-color 0.2s ease; /* Transición suave */
}

/* Efecto al pasar el mouse por encima del div */
.select:hover {
  background-color: #f7f8fd; /* Fondo sutil */
  border-color: #d1d5db; /* Borde un poco más oscuro */
}

/* Estilos específicos para el <select> DENTRO del div */
.select select {
  /* Quita toda la apariencia nativa */
  appearance: none;
  -webkit-appearance: none;
  -moz-appearance: none;
  background: transparent; /* Sin fondo propio */
  border: none; /* Sin borde propio */
  outline: none; /* Sin contorno al hacer clic */

  /* Ocupa todo el espacio del div y hereda estilos */
  width: 100%;
  height: 100%; /* Asegura que ocupe toda la altura */
  padding: 8px 30px 8px 12px; /* Espacio interno (más a la derecha para la flecha) */
  cursor: pointer;
  font: inherit; /* Misma fuente que el resto */
  color: var(--text); /* Color de texto */
  margin: 0; /* Sin márgenes internos */
  box-sizing: border-box; /* Padding incluido en el tamaño */
}

/* Oculta la flecha nativa en IE/Edge */
.select select::-ms-expand {
  display: none;
}

/* Añade nuestra propia flecha (SVG como imagen de fondo) */
.select::after {
    content: '';
    position: absolute;
    top: 50%;
    right: 10px;
    width: 16px; /* Ancho del icono */
    height: 16px; /* Alto del icono */
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%236b6b7a' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: center;
    transform: translateY(-50%); /* Centra verticalmente */
    pointer-events: none; /* Evita que la flecha bloquee el clic */
}
/* ===== FIN DE ESTILOS PARA SELECTORES ===== */
.back{width:36px;height:36px;border:1px solid var(--line);border-radius:10px;background:#fff;cursor:pointer}

/* Chips / pills / tags (común) */
.pill{font-size:12px;padding:4px 8px;border-radius:999px;background:#eef0f6;border:1px solid var(--line)}
.pill--time{background:#ffeede;color:#9a4c10;border-color:#ffd9bd}
.tag{padding:4px 8px;border-radius:999px;font-size:12px;border:1px solid var(--line);background:#f5f6fb}
.tag--high{background:#ffe8e8;color:#9e2330;border-color:#ffd1d1}
.tag--medium{background:#fff4e6;color:#8a4b12;border-color:#ffd8b2}
.tag--low{background:#eef7ff;color:#0b558a;border-color:#cfe4ff}
.tag--new{background:#e5f0ff;color:#184ea8;border-color:#cddcff}
.tag--progress{background:#e5f8ef;color:#1a6c46;border-color:#cdeedd}
.tag--hold{background:#fff7e7;color:#8a5a12;border-color:#ffe6b8}

.muted{color:var(--muted)}
.small{font-size:13px}
.sr{position:absolute;left:-9999px}

/* ===================== */
/* 3) Vista: LISTA       */
/*    (.view-tickets)    */
/* ===================== */

/* Layout de la vista de lista + detalle */
.app.view-tickets{
  display:grid;
  grid-template-columns: 280px 1fr 460px;
  grid-template-rows: 64px 1fr;
  grid-template-areas:
    "sidebar header header"
    "sidebar list   detail";
  min-height:100vh;
  overflow: hidden; /* Evita que el contenedor principal se desplace */
  transition: grid-template-columns 0.3s ease-in-out;
}
.view-tickets .sidebar{grid-area:sidebar}
.view-tickets .header{grid-area:header}

.view-tickets .list {
    grid-area: list;
    height: calc(100vh - 64px); /* <-- AÑADE ESTA LÍNEA */
}
.view-tickets .detail {
    grid-area: detail;
    height: calc(100vh - 64px); /* <-- AÑADE ESTA LÍNEA */
}

/* Lista de tickets (componentes existentes) */
.list{padding:16px;overflow-y:auto;display:flex;flex-direction:column;gap:12px}
.bulk-bar{padding:8px 10px;border:1px dashed var(--line);background:#fff;border-radius:12px;color:var(--muted)}
.ticket{
  background:#fff;border:1px solid var(--line);border-radius:14px;box-shadow:var(--shadow);
  padding:12px;display:grid;grid-template-columns:34px 1fr auto;gap:12px
}
.avatar{width:34px;height:34px;border-radius:8px;display:grid;place-items:center;font-weight:700;color:#fff}
.avatar--R{background:#4aa3d7}
.avatar--C{background:#58b676}
.avatar--S{background:#d58f44}
.avatar--B{background:#c35656}
.avatar--A{background:#c06bcf}
.ticket-head{display:flex;gap:8px;flex-wrap:wrap}
.ticket-title{margin:6px 0 4px;font-weight:700}
.ticket-meta{display:flex;gap:14px;color:var(--muted);font-size:14px}
.dot{width:4px;height:4px;border-radius:50%;background:var(--line);align-self:center}
.ticket-actions{display:flex;gap:8px;align-items: center;}
.btn-icon,.btn-link{border:1px solid var(--line);border-radius:10px;background:#fff;cursor:pointer}
.btn-icon{width:36px;height:36px;display:grid;place-items:center}
.btn-link{padding:8px 12px;}


/* Panel de detalle */
.detail{border-left:1px solid var(--line);background:#fafbff;display:flex;flex-direction:column}
.detail-head{padding:14px 16px;display:flex;align-items:center;gap:10px;background:#fff;border-bottom:1px solid var(--line)}
.user-name{font-weight:700}
.detail-body {
    padding: 16px;
    display: flex;
    flex-direction: column;
    gap: 16px;
    flex: 1 1 auto;     
    overflow-y: auto;   
    min-height: 100px; 
}
.bubble{background:#5fb3cc;border-radius:14px;padding:12px;min-height:70px}
.bubble--small{width:60%;height:46px}
.composer{
  background:#fff;
  border:1px solid var(--line);
  border-radius:14px;
  padding:10px;
  margin: 0 16px 16px 16px;
  flex-shrink: 0;
}
.composer textarea{width:100%;border:none;outline:none;min-height:44px;font:inherit}

/* ===================== */
/* 4) Vista: DASHBOARD   */
/*    (.view-dashboard)  */
/* ===================== */

/* Grid del dashboard */
.app.view-dashboard{
  display:grid;
  grid-template-columns: 260px 1fr;
  grid-template-rows: 64px 1fr;
  grid-template-areas:
    "sidebar header"
    "sidebar main";
  min-height:100vh;
}
.view-dashboard .sidebar{grid-area:sidebar}
.view-dashboard .header{grid-area:header}
.view-dashboard .dashboard{grid-area:main}

/* Secciones del dashboard */
.dashboard{
  display:grid; gap:16px;
  grid-template-columns: 1fr; /* <-- ¡CAMBIO CLAVE! De '2fr 1fr' a '1fr' */
  grid-template-areas:
    "kpis"
    "charts"
    "left"
    "right";
  padding:16px;
}

.kpis{grid-area:kpis; display:grid; grid-template-columns:repeat(4,1fr); gap:12px}
.cards { 
    display: grid; 
    gap: 16px; 
}
.cards.two-col { 
    /* grid-area: charts; */
    grid-template-columns: 1fr 1fr; /* <= ESTO ES LO IMPORTANTE */
}
.view-dashboard .cards.left{grid-area:left}
.view-dashboard .cards.right{grid-area:right}

.kpi{
  background:#fff; border:1px solid var(--line); border-radius:14px; padding:14px; box-shadow:var(--shadow);
}
.kpi-title{font-size:13px; color:var(--muted)}
.kpi-value{font-size:28px; font-weight:800; margin:6px 0}
.kpi-value.alert{color:var(--red)}
.kpi-foot{font-size:12px; color:var(--muted); display:flex; align-items:center; gap:6px}
.dot{width:8px;height:8px;border-radius:8px;background:#cfd3db;display:inline-block}
.dot--blue{background:var(--blue)}
.dot--green{background:var(--green)}
.dot--red{background:var(--red)}

.card{
  background:#fff; border:1px solid var(--line); border-radius:14px; box-shadow:var(--shadow);
}
.card-head{display:flex; align-items:center; justify-content:space-between; padding:12px 14px; border-bottom:1px solid var(--line)}
.card h2{margin:0; font-size:16px}

/* Gráfico de barras simple */
.bars{display:grid; grid-template-columns:repeat(12,1fr); gap:8px; padding:16px}
.bars > div{
  height:120px; background:linear-gradient(180deg, var(--blue) 0, var(--blue-100) 100%);
  border-radius:8px 8px 2px 2px; transform-origin:bottom; transform:scaleY(var(--v));
  border:1px solid #dbe5ff;
}
.axis{padding:0 16px 14px; color:var(--muted); font-size:12px}

/* Progreso SLA */
.progress{padding:10px 14px 14px}
.progress-row{display:grid; grid-template-columns:110px 1fr 52px; align-items:center; gap:10px; margin:10px 0}
.progress-row .bar{height:10px; background:#eef0f6; border-radius:999px; overflow:hidden}
.progress-row .bar i{display:block; height:100%; width:var(--p); background:linear-gradient(90deg,var(--green),#9be1c2)}

/* Tabla lista (reutilizable) */
.table{padding:6px 10px 12px}
.thead,.trow{display:grid; grid-template-columns:100px 1fr 180px 120px 140px 120px; gap:10px; align-items:center}
.thead{font-weight:700; color:#475569; border-bottom:1px solid var(--line); padding:8px 0}
.trow{padding:10px 0; border-bottom:1px dashed var(--line)}
.trow.warn{background:#fff7f8}

/* Acciones rápidas / listas */
.activity{list-style:none;margin:0;padding:10px 14px 14px;display:flex;flex-direction:column;gap:10px}
.quick{padding:12px 14px 16px; display:flex; flex-direction:column; gap:8px}
.btn{padding:10px 12px; border:1px solid var(--line); border-radius:10px; background:#fff; cursor:pointer}
.btn:hover{background:#f7f8fd}

/* ===================== */
/* 5) Responsivo (ambas) */
/* ===================== */
@media (max-width:1200px){
  .kpis{grid-template-columns:repeat(2,1fr)}
  .cards.two-col{grid-template-columns:1fr}
  .dashboard{grid-template-areas:"kpis" "charts" "left" "right"; grid-template-columns:1fr}
   .app.view-tickets {
    grid-template-columns: 260px 1fr 380px; /* Ajustamos las columnas */
    grid-template-areas:
      "sidebar header header"
      "sidebar list   detail";
  }

}
@media (max-width:760px){
  .app.view-dashboard{
    grid-template-columns:1fr; grid-template-areas:"header" "main";
  }
  .app.view-tickets{
    grid-template-columns:1fr; grid-template-areas:"header" "list";
  }
  .sidebar{display:none}
  .thead,.trow{grid-template-columns:90px 1fr 120px 110px 120px 100px}
}

.btn-link {
  /* Estilos existentes */
  border: 1px solid var(--line);
  border-radius: 10px;
  background: #fff;
  cursor: pointer;
  padding: 8px 12px;
  text-decoration: none; /* Añadido antes */
  color: var(--text); /* Añadido antes */

  /* 👇 AÑADE ESTAS LÍNEAS 👇 */
  display: inline-block; /* Asegura comportamiento de bloque en línea */
  min-width: 80px;      /* Ancho mínimo (ajústalo si prefieres otro) */
  text-align: center;   /* Centra el texto del botón */
  font-size: 14px;      /* Opcional: ajustar tamaño de fuente si difiere */
  line-height: 1.4;     /* Opcional: ajustar altura de línea si es necesario */
  /* 👆 FIN DE LÍNEAS AÑADIDAS 👆 */
}

/* Regla hover existente */
.btn-link:hover {
    background: #f7f8fd;
}


/* ===================================== */
/* 6) Funcionalidad Sidebar Toggle (Final) */
/* ===================================== */

.sidebar-toggle {
    background: rgba(255, 255, 255, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.2);
    color: white;
    border-radius: 50%;
    cursor: pointer;
    width: 32px;
    height: 32px;
    position: absolute;
    top: 18px;
    right: -16px;
    z-index: 1000;
    display: grid;
    place-items: center;
}

.sidebar {
    overflow: hidden; /* Oculta el texto de la sidebar cuando se encoge */
}

/* --- ESTADO OCULTO --- */
/* Esta es la parte clave. Redefine la grilla cuando la sidebar está oculta */
.app.sidebar-collapsed.view-dashboard {
    grid-template-columns: 0 1fr;
}
.app.sidebar-collapsed.view-tickets {
    grid-template-columns: 0 1fr 460px;
}

/* ===================================== */

/* ===== ESTILOS PARA FORMULARIOS GENÉRICOS ===== */

/* Estilo base para los inputs y textareas con la clase form-input */
.form-input {
  width: 100%; /* Ocupa todo el ancho disponible */
  padding: 10px 12px; /* Espaciado interno */
  border: 1px solid var(--line); /* Borde sutil */
  border-radius: 8px; /* Bordes redondeados */
  margin-top: 5px; /* Espacio sobre el input */
  font: inherit; /* Usa la misma fuente que el resto */
  color: var(--text);
  background-color: #fff; /* Fondo blanco */
  box-shadow: inset 0 1px 2px rgba(0,0,0,0.05); /* Sombra interna sutil */
  transition: border-color 0.2s ease, box-shadow 0.2s ease; /* Transiciones suaves */
}

/* Estilo al enfocar (hacer clic) en el input/textarea */
.form-input:focus {
  outline: none; /* Quita el contorno por defecto */
  border-color: var(--blue); /* Borde azul al enfocar */
  box-shadow: inset 0 1px 2px rgba(0,0,0,0.05), 0 0 0 3px rgba(47, 115, 217, 0.2); /* Sombra exterior azul suave */
}

/* Ajustes específicos para textareas */
textarea.form-input {
  min-height: 80px; /* Altura mínima para descripción */
  resize: vertical; /* Permite redimensionar solo verticalmente */
}

/* Estilo para los párrafos <p> generados por form.as_p dentro de un .card */
.card form p {
  margin-bottom: 15px; /* Espacio debajo de cada campo */
}

/* Estilo para las etiquetas <label> dentro de esos párrafos */
.card form p label {
  display: block; /* La etiqueta ocupa su propia línea */
  font-weight: 600; /* Texto un poco más grueso */
  margin-bottom: 3px; /* Pequeño espacio bajo la etiqueta */
  color: var(--muted); /* Color grisáceo */
  font-size: 14px; /* Tamaño un poco más pequeño */
}

/* Si usas campos select con la clase 'form-select' (como en otros formularios) */
.form-select {
     width: 100%; 
     margin-top: 5px; 
}
/* Puedes combinarlos con los estilos de .select que ya tenemos si los envuelves en <div class="select"> */

/* ===== FIN DE ESTILOS PARA FORMULARIOS ===== */

/* ===== LAYOUT ESPECÍFICO PARA LANDING PAGE ===== */

/* Redefine la grilla para ocultar la sidebar y expandir el contenido */
.app.view-landing {
  display: grid;
  grid-template-columns: 1fr; /* Una sola columna */
  grid-template-rows: 64px 1fr; /* Fila para header, fila para main */
  grid-template-areas:
    "header" /* Header ocupa la primera fila */
    "main";   /* Main ocupa la segunda */
  min-height: 100vh;
  background: var(--bg); /* Fondo simple, sin gradiente lateral */
}

/* Oculta la sidebar específicamente en esta vista */
.app.view-landing .sidebar {
  display: none;
}

/* Asigna las áreas a los elementos correspondientes */
.app.view-landing .header {
  background: var(--indigo-800); /* Fondo oscuro como la sidebar */
  color: #fff; /* Texto blanco */
}

/* Estilos para el <main> DENTRO de view-landing */
.app.view-landing main {
  grid-area: main; /* Asegura que ocupe el área 'main' */
  display: flex; /* Usa flexbox para centrar su contenido */
  flex-direction: column;
  align-items: center; /* Centra horizontalmente la tarjeta */
  justify-content: center; /* Centra verticalmente la tarjeta */
  padding: 30px 16px; /* Espaciado interno */
  overflow-y: auto; /* Scroll si el contenido es muy alto */
}

/* ===== FIN LAYOUT LANDING PAGE ===== */

/* ===== ESTILOS PARA PÁGINA DE REPORTES ===== */

/* Contenedor principal de la página de reportes */
/* (Ya tenemos el padding en el main style="padding: 16px;") */

/* Estilos para las tablas dentro de las tarjetas de reporte */
.card .table table { /* Apunta a la tabla dentro de .table dentro de .card */
  width: 100%; /* Ocupa todo el ancho de la tarjeta */
  border-collapse: collapse; /* Une los bordes de las celdas */
  margin-top: 10px; /* Un poco de espacio sobre la tabla */
}

/* Estilos para las cabeceras de las tablas (th) */
.card .table th {
  border-bottom: 2px solid var(--line); /* Línea gruesa bajo la cabecera */
  padding-bottom: 8px; /* Espacio bajo el texto de cabecera */
  font-weight: 600; /* Texto un poco más grueso */
  color: var(--muted); /* Color grisáceo */
  font-size: 14px;
  text-transform: uppercase; /* Opcional: mayúsculas */
}

/* Estilos para las celdas de datos (td) */
.card .table td {
  padding: 10px 5px; /* Espaciado vertical y un poco horizontal */
  border-bottom: 1px solid var(--line); /* Línea sutil entre filas */
  font-size: 14px;
}

/* Opcional: Quitar borde de la última fila para que no se duplique con el final de la tarjeta */
.card .table tbody tr:last-child td {
  border-bottom: none;
}

/* Opcional: Alinear la cantidad a la derecha */
.card .table th:last-child,
.card .table td:last-child {
  text-align: right;
}

/* Opcional: Alinear el estado/categoría a la izquierda */
.card .table th:first-child,
.card .table td:first-child {
  text-align: left;
}

/* ===== FIN ESTILOS REPORTES ===== */

/* ===================================== */
/* 7) Estilos de Notificaciones          */
/* ===================================== */

.sidebar .nav a .badge {
    background-color: var(--red);
    color: #fff;
    font-size: 11px;
    font-weight: 700;
    padding: 3px 6px;
    border-radius: 999px;
    line-height: 1;
    margin-left: auto; /* Empuja el badge a la derecha */
}

