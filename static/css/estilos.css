/* ===================== */
/* 1) Variables & base   */
/* ===================== */
:root{
  --indigo-800:#2a0441; /* sidebar */
  --lavender:#b9a7d3;   /* acento lateral */
  --bg:#f4f6fb;         /* fondo app */
  --card:#ffffff;
  --line:#e7e8ee;
  --text:#1f2430;
  --muted:#6b6b7a;

  --blue:#2f73d9;
  --blue-100:#eaf1ff;
  --green:#2fb171;
  --red:#ea5573;
  --orange:#ff9c5b;

  --shadow:0 8px 24px rgba(22,22,26,.06);
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font:15px/1.35 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Arial;
  color:var(--text);
  background:var(--bg);
}

/* ===================== */
/* 2) Elementos comunes  */
/* ===================== */

/* Sidebar (com칰n) */
.sidebar{
  background:var(--indigo-800);
  color:#fff;
  padding:18px 14px;
  display:flex; 
  flex-direction:column; 
  gap:14px;
  overflow-y: auto;
  overflow-x: visible;
  height: 100%;
}

.brand{display:flex;align-items:center;gap:10px}
.logo{width:38px;height:38px;border-radius:10px;background:#fff;color:var(--indigo-800);display:grid;place-items:center;font-weight:800}
.logo-img{width:38px;height:38px;object-fit:contain}
.sidebar-close-btn{background:transparent;border:none;color:#fff;cursor:pointer;padding:8px;border-radius:8px;transition:background 0.2s;display:flex;align-items:center;justify-content:center;}
.sidebar-close-btn:hover{background:rgba(255,255,255,0.1);}
.title b{display:block}
.title small{opacity:.8}
.nav-title{font-size:12px;opacity:.7;text-transform:uppercase;margin-top:8px}
.nav,.nav-block{display:flex;flex-direction:column;gap:6px}
.nav a,.nav-block a{
  color:#fff;text-decoration:none;padding:10px 12px;border-radius:10px;transition:.2s background;
}
.nav a:hover,.nav-block a:hover{background:rgba(255,255,255,.08)}
.nav a.active,.nav-block a.active{background:rgba(255,255,255,.16)}
.divider{height:1px;background:rgba(255,255,255,.12);margin:8px 0}
.search{margin-top:6px;padding:8px;border-radius:10px;background:rgba(255,255,255,.08)}
.search input{border:none;outline:none;background:transparent;color:#fff;width:100%}

/* --- Iconos SOLO en la sidebar --- */
.sidebar .nav a,
.sidebar .nav-block a {
  display: flex;
  align-items: center;
  gap: 10px;
}

.sidebar .nav a .ico,
.sidebar .nav-block a .ico {
  width: 18px;
  height: 18px;
  display: grid;
  place-items: center;
  flex: 0 0 18px;
}

.sidebar .nav svg,
.sidebar .nav-block svg {
  width: 18px;
  height: 18px;
  stroke: currentColor;
  fill: none;          /* importante: no rellenar */
  stroke-width: 2;
}


/* Header (com칰n) */
.header{
  background:#fff; box-shadow:var(--shadow);
  display:flex; align-items:center; justify-content:space-between;
  padding:0 16px;
}
.page-title{margin:0; font-size:20px}
.filters{display:flex; gap:8px}
/* ===== ESTILOS PARA LOS SELECTORES DE FILTRO ===== */
.select {
  /* Mantenemos lo b치sico del div contenedor */
  border: 1px solid var(--line);
  border-radius: 8px;
  background-color: #fff; /* Fondo blanco */
  cursor: pointer;
  position: relative; /* Necesario para posicionar la flecha */
  min-width: 150px; /* Ancho m칤nimo */
  display: inline-block; /* Para que se alinee bien con otros filtros */
  transition: background-color 0.2s ease, border-color 0.2s ease; /* Transici칩n suave */
}

/* Efecto al pasar el mouse por encima del div */
.select:hover {
  background-color: #f7f8fd; /* Fondo sutil */
  border-color: #d1d5db; /* Borde un poco m치s oscuro */
}

/* Estilos espec칤ficos para el <select> DENTRO del div */
.select select {
  /* Quita toda la apariencia nativa */
  appearance: none;
  -webkit-appearance: none;
  -moz-appearance: none;
  background: transparent; /* Sin fondo propio */
  border: none; /* Sin borde propio */
  outline: none; /* Sin contorno al hacer clic */

  /* Ocupa todo el espacio del div y hereda estilos */
  width: 100%;
  height: 100%; /* Asegura que ocupe toda la altura */
  padding: 8px 30px 8px 12px; /* Espacio interno (m치s a la derecha para la flecha) */
  cursor: pointer;
  font: inherit; /* Misma fuente que el resto */
  color: var(--text); /* Color de texto */
  margin: 0; /* Sin m치rgenes internos */
  box-sizing: border-box; /* Padding incluido en el tama침o */
}

/* Oculta la flecha nativa en IE/Edge */
.select select::-ms-expand {
  display: none;
}

/* A침ade nuestra propia flecha (SVG como imagen de fondo) */
.select::after {
    content: '';
    position: absolute;
    top: 50%;
    right: 10px;
    width: 16px; /* Ancho del icono */
    height: 16px; /* Alto del icono */
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%236b6b7a' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: center;
    transform: translateY(-50%); /* Centra verticalmente */
    pointer-events: none; /* Evita que la flecha bloquee el clic */
}
/* ===== FIN DE ESTILOS PARA SELECTORES ===== */
.back{width:36px;height:36px;border:1px solid var(--line);border-radius:10px;background:#fff;cursor:pointer}

/* Chips / pills / tags (com칰n) */
.pill{font-size:12px;padding:4px 8px;border-radius:999px;background:#eef0f6;border:1px solid var(--line)}
.pill--time{background:#ffeede;color:#9a4c10;border-color:#ffd9bd}

/* TAGS DE ESTADO */
.tag{display:inline-block;padding:4px 10px;border-radius:6px;font-size:12px;font-weight:600}
.tag--open{background:#e3f2fd;color:#1976d2;border:1px solid #90caf9} /* Azul - Abierto */
.tag--progress{background:#fff7e7;color:#8a5a12;border:1px solid #ffe6b8} /* Amarillo - En Progreso */
.tag--resolved{background:#e8f5e9;color:#388e3c;border:1px solid #a5d6a7} /* Verde - Resuelto */
.tag--closed{background:#f5f5f5;color:#616161;border:1px solid #bdbdbd} /* Gris - Cerrado */
.tag--rejected{background:#ffebee;color:#c62828;border:1px solid #ef9a9a} /* Rojo - Rechazado */

/* TAGS DE PRIORIDAD */
.tag--high{background:#ffebee;color:#c62828;border:1px solid #ef9a9a} /* Rojo - Alta/Alto */
.tag--medium{background:#fff7e7;color:#8a5a12;border:1px solid #ffe6b8} /* Amarillo - Media/Medio */
.tag--low{background:#e8f5e9;color:#388e3c;border:1px solid #a5d6a7} /* Verde - Baja/Bajo */

.muted{color:var(--muted)}
.small{font-size:13px}
.sr{position:absolute;left:-9999px}

/* ===================== */
/* 3) Vista: LISTA       */
/*    (.view-tickets)    */
/* ===================== */

/* Layout de la vista de lista + detalle */
.app.view-tickets{
  display:grid;
  grid-template-columns: 260px 1fr 460px;
  grid-template-rows: 64px 1fr;
  grid-template-areas:
    "sidebar header header"
    "sidebar list   detail";
  min-height:100vh;
  overflow: hidden;
  transition: grid-template-columns 0.3s ease-in-out;
}
.view-tickets .sidebar{grid-area:sidebar}
.view-tickets .header{grid-area:header}

.view-tickets .list {
    grid-area: list;
    height: calc(100vh - 64px);
}
.view-tickets .detail {
    grid-area: detail;
    height: calc(100vh - 64px);
}

/* Lista de tickets (componentes existentes) */
.list{padding:16px;overflow-y:auto;display:flex;flex-direction:column;gap:12px}
.bulk-bar{padding:8px 10px;border:1px dashed var(--line);background:#fff;border-radius:12px;color:var(--muted)}
.ticket{
  background:#fff;border:1px solid var(--line);border-radius:14px;box-shadow:var(--shadow);
  padding:12px;display:grid;grid-template-columns:34px 1fr auto;gap:12px
}
.avatar{width:34px;height:34px;border-radius:8px;display:grid;place-items:center;font-weight:700;color:#fff}
/* Remover o comentar estas l칤neas: */
/* .avatar--R{background:#4aa3d7} */
/* .avatar--C{background:#58b676} */
/* .avatar--S{background:#d58f44} */
/* .avatar--B{background:#c35656} */
/* .avatar--A{background:#c06bcf} */
.ticket-head{display:flex;gap:8px;flex-wrap:wrap}
.ticket-title{margin:6px 0 4px;font-weight:700; color: var(--text);}
.ticket-meta{display:flex;gap:14px;color:var(--muted);font-size:14px}
.dot{width:4px;height:4px;border-radius:50%;background:var(--line);align-self:center}
.ticket-actions{display:flex;gap:8px;align-items: center;}
.btn-icon,.btn-link{border:1px solid var(--line);border-radius:10px;background:#fff;cursor:pointer}
.btn-icon{width:36px;height:36px;display:grid;place-items:center}
.btn-link{padding:8px 12px;}


/* Panel de detalle */
.detail{
    border-left:1px solid var(--line);
    background:#fafbff;
    display:flex;
    flex-direction:column;
    height: calc(100vh - 64px);
    overflow: hidden;
}

.detail-head{
    padding:14px 16px;
    display:flex;
    align-items:center;
    gap:10px;
    background:#fff;
    border-bottom:1px solid var(--line);
    flex-shrink: 0;
}

.user-name{font-weight:700; color: var(--text);}

.detail-body {
    padding: 16px;
    display: flex;
    flex-direction: column;
    gap: 12px;
    flex: 1 1 auto;
    overflow-y: auto;
    min-height: 100px;
    scroll-behavior: smooth;
}

.bubble{
    background:#5fb3cc;
    border-radius:14px;
    padding:12px 14px;
    min-height: auto; /* Cambiar de 70px fijo a auto */
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
    word-wrap: break-word; /* Rompe palabras largas */
    overflow-wrap: break-word; /* Asegura que el texto largo se ajuste */
}

.bubble p {
    margin: 0;
    line-height: 1.5;
    word-wrap: break-word;
}

.bubble p + p {
    margin-top: 8px;
}

.bubble strong {
    display: inline-block;
    margin-bottom: 4px;
}

.composer{
    background:#fff;
    border:1px solid var(--line);
    border-radius:14px;
    padding:10px;
    margin: 0 16px 16px 16px;
    flex-shrink: 0;
}

.composer textarea{
    width:100%;
    border:none;
    outline:none;
    min-height:44px;
    max-height: 200px;
    font:inherit;
    resize: vertical;
}

/* ===================== */
/* 4) Vista: DASHBOARD   */
/*    (.view-dashboard)  */
/* ===================== */

/* Grid del dashboard */
.app.view-dashboard{
  display:grid;
  grid-template-columns: 260px 1fr;
  grid-template-rows: 64px 1fr;
  grid-template-areas:
    "sidebar header"
    "sidebar main";
  min-height:100vh;
}
.view-dashboard .sidebar{grid-area:sidebar}
.view-dashboard .header{grid-area:header}
.view-dashboard .dashboard{grid-area:main}

/* ===================== */
/* 4b) Vista: PANEL PRINCIPAL */
/*    (.view-panel-principal)  */
/* ===================== */

.app.view-panel-principal{
  display:grid;
  grid-template-columns: 260px 1fr;
  grid-template-rows: 64px 1fr;
  grid-template-areas:
    "sidebar header"
    "sidebar main";
  min-height:100vh;
}
.view-panel-principal .sidebar{grid-area:sidebar}
.view-panel-principal .header{grid-area:header}
.view-panel-principal main{grid-area:main; overflow-y:auto}

/* Secciones del dashboard */
.dashboard{
  display:grid; gap:16px;
  grid-template-columns: 1fr; /* <-- 춰CAMBIO CLAVE! De '2fr 1fr' a '1fr' */
  grid-template-areas:
    "kpis"
    "charts"
    "left"
    "right";
  padding:16px;
}

.kpis{grid-area:kpis; display:grid; grid-template-columns:repeat(4,1fr); gap:12px}
.cards { 
    display: grid; 
    gap: 16px; 
}
.cards.two-col { 
    /* grid-area: charts; */
    grid-template-columns: 1fr 1fr; /* <= ESTO ES LO IMPORTANTE */
}
.view-dashboard .cards.left{grid-area:left}
.view-dashboard .cards.right{grid-area:right}

.kpi{
  background:#fff; border:1px solid var(--line); border-radius:14px; padding:14px; box-shadow:var(--shadow);
}
.kpi-title{font-size:13px; color:var(--muted)}
.kpi-value{font-size:28px; font-weight:800; margin:6px 0}
.kpi-value.alert{color:var(--red)}
.kpi-foot{font-size:12px; color:var(--muted); display:flex; align-items:center; gap:6px}
.dot{width:8px;height:8px;border-radius:8px;background:#cfd3db;display:inline-block}
.dot--blue{background:var(--blue)}
.dot--green{background:var(--green)}
.dot--red{background:var(--red)}

.card{
  background:#fff; border:1px solid var(--line); border-radius:14px; box-shadow:var(--shadow);
}
.card-head{display:flex; align-items:center; justify-content:space-between; padding:12px 14px; border-bottom:1px solid var(--line)}
.card h2{margin:0; font-size:16px}

/* Gr치fico de barras simple */
.bars{display:grid; grid-template-columns:repeat(12,1fr); gap:8px; padding:16px}
.bars > div{
  height:120px; background:linear-gradient(180deg, var(--blue) 0, var(--blue-100) 100%);
  border-radius:8px 8px 2px 2px; transform-origin:bottom; transform:scaleY(var(--v));
  border:1px solid #dbe5ff;
}
.axis{padding:0 16px 14px; color:var(--muted); font-size:12px}

/* Progreso SLA */
.progress{padding:10px 14px 14px}
.progress-row{display:grid; grid-template-columns:110px 1fr 52px; align-items:center; gap:10px; margin:10px 0}
.progress-row .bar{height:10px; background:#eef0f6; border-radius:999px; overflow:hidden}
.progress-row .bar i{display:block; height:100%; width:var(--p); background:linear-gradient(90deg,var(--green),#9be1c2)}

/* Tabla lista (reutilizable) */
.table{padding:6px 10px 12px}
.thead,.trow{display:grid; grid-template-columns:100px 1fr 180px 120px 140px 120px; gap:10px; align-items:center}
.thead{font-weight:700; color:#475569; border-bottom:1px solid var(--line); padding:8px 0}
.trow{padding:10px 0; border-bottom:1px dashed var(--line)}
.trow.warn{background:#fff7f8}

/* Acciones r치pidas / listas */
.activity{list-style:none;margin:0;padding:10px 14px 14px;display:flex;flex-direction:column;gap:10px}
.quick{padding:12px 14px 16px; display:flex; flex-direction:column; gap:8px}
.btn{padding:10px 12px; border:1px solid var(--line); border-radius:10px; background:#fff; cursor:pointer}
.btn:hover{background:#f7f8fd}

/* ===================== */
/* 5) Responsivo (ambas) */
/* ===================== */
@media (max-width:1200px){
  .kpis{grid-template-columns:repeat(2,1fr)}
  .cards.two-col{grid-template-columns:1fr}
  .dashboard{grid-template-areas:"kpis" "charts" "left" "right"; grid-template-columns:1fr}
   .app.view-tickets {
    grid-template-columns: 260px 1fr 380px; /* Ajustamos las columnas */
    grid-template-areas:
      "sidebar header header"
      "sidebar list   detail";
  }

}
@media (max-width:760px){
  .app.view-dashboard{
    grid-template-columns:1fr; grid-template-areas:"header" "main";
  }
  .app.view-tickets{
    grid-template-columns:1fr; grid-template-areas:"header" "list";
  }
  .sidebar{display:none}
  .thead,.trow{grid-template-columns:90px 1fr 120px 110px 120px 100px}
}

.btn-link {
  /* Estilos existentes */
  border: 1px solid var(--line);
  border-radius: 10px;
  background: #fff;
  cursor: pointer;
  padding: 8px 12px;
  text-decoration: none; /* A침adido antes */
  color: var(--text); /* A침adido antes */

  /* 游녢 A칌ADE ESTAS L칈NEAS 游녢 */
  display: inline-block; /* Asegura comportamiento de bloque en l칤nea */
  min-width: 80px;      /* Ancho m칤nimo (aj칰stalo si prefieres otro) */
  text-align: center;   /* Centra el texto del bot칩n */
  font-size: 14px;      /* Opcional: ajustar tama침o de fuente si difiere */
  line-height: 1.4;     /* Opcional: ajustar altura de l칤nea si es necesario */
  /* 游녡 FIN DE L칈NEAS A칌ADIDAS 游녡 */
}

/* Regla hover existente */
.btn-link:hover {
    background: #f7f8fd;
}


/* ===================================== */
/* 6) Sidebar sin toggle - siempre visible */
/* ===================================== */

.sidebar {
    position: relative;
}

/* ===================================== */

/* ===== ESTILOS PARA FORMULARIOS GEN칄RICOS ===== */

/* Estilo base para los inputs y textareas con la clase form-input */
.form-input {
  width: 100%; /* Ocupa todo el ancho disponible */
  padding: 10px 12px; /* Espaciado interno */
  border: 1px solid var(--line); /* Borde sutil */
  border-radius: 8px; /* Bordes redondeados */
  margin-top: 5px; /* Espacio sobre el input */
  font: inherit; /* Usa la misma fuente que el resto */
  color: var(--text);
  background-color: #fff; /* Fondo blanco */
  box-shadow: inset 0 1px 2px rgba(0,0,0,0.05); /* Sombra interna sutil */
  transition: border-color 0.2s ease, box-shadow 0.2s ease; /* Transiciones suaves */
}

/* Estilo al enfocar (hacer clic) en el input/textarea */
.form-input:focus {
  outline: none; /* Quita el contorno por defecto */
  border-color: var(--blue); /* Borde azul al enfocar */
  box-shadow: inset 0 1px 2px rgba(0,0,0,0.05), 0 0 0 3px rgba(47, 115, 217, 0.2); /* Sombra exterior azul suave */
}

/* Ajustes espec칤ficos para textareas */
textarea.form-input {
  min-height: 80px; /* Altura m칤nima para descripci칩n */
  resize: vertical; /* Permite redimensionar solo verticalmente */
}

/* Estilo para los p치rrafos <p> generados por form.as_p dentro de un .card */
.card form p {
  margin-bottom: 15px; /* Espacio debajo de cada campo */
}

/* Estilo para las etiquetas <label> dentro de esos p치rrafos */
.card form p label {
  display: block; /* La etiqueta ocupa su propia l칤nea */
  font-weight: 600; /* Texto un poco m치s grueso */
  margin-bottom: 3px; /* Peque침o espacio bajo la etiqueta */
  color: var(--muted); /* Color gris치ceo */
  font-size: 14px; /* Tama침o un poco m치s peque침o */
}

/* Si usas campos select con la clase 'form-select' (como en otros formularios) */
.form-select {
     width: 100%; 
     margin-top: 5px; 
}
/* Puedes combinarlos con los estilos de .select que ya tenemos si los envuelves en <div class="select"> */

/* ===== FIN DE ESTILOS PARA FORMULARIOS ===== */

/* ===== LAYOUT ESPEC칈FICO PARA LANDING PAGE ===== */

/* Redefine la grilla para ocultar la sidebar y expandir el contenido */
.app.view-landing {
  display: grid;
  grid-template-columns: 1fr;
  grid-template-rows: 64px 1fr;
  grid-template-areas:
    "header"
    "main";
  min-height: 100vh;
  background: var(--bg);
}

/* Oculta la sidebar espec칤ficamente en esta vista */
.app.view-landing .sidebar {
  display: none;
}

/* Asigna las 치reas a los elementos correspondientes */
.app.view-landing .header {
  background: var(--indigo-800);
  color: #fff;
}

/* Estilos para el <main> DENTRO de view-landing */
.app.view-landing main {
  grid-area: main;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 30px 16px;
  overflow-y: auto;
}

/* ===== FIN LAYOUT LANDING PAGE ===== */

/* ===== ESTILOS PARA P츼GINA DE REPORTES ===== */

/* Contenedor principal de la p치gina de reportes */
/* (Ya tenemos el padding en el main style="padding: 16px;") */

/* Estilos para las tablas dentro de las tarjetas de reporte */
.card .table table { /* Apunta a la tabla dentro de .table dentro de .card */
  width: 100%; /* Ocupa todo el ancho de la tarjeta */
  border-collapse: collapse; /* Une los bordes de las celdas */
  margin-top: 10px; /* Un poco de espacio sobre la tabla */
}

/* Estilos para las cabeceras de las tablas (th) */
.card .table th {
  border-bottom: 2px solid var(--line); /* L칤nea gruesa bajo la cabecera */
  padding-bottom: 8px; /* Espacio bajo el texto de cabecera */
  font-weight: 600; /* Texto un poco m치s grueso */
  color: var(--muted); /* Color gris치ceo */
  font-size: 14px;
  text-transform: uppercase; /* Opcional: may칰sculas */
}

/* Estilos para las celdas de datos (td) */
.card .table td {
  padding: 10px 5px; /* Espaciado vertical y un poco horizontal */
  border-bottom: 1px solid var(--line); /* L칤nea sutil entre filas */
  font-size: 14px;
}

/* Opcional: Quitar borde de la 칰ltima fila para que no se duplique con el final de la tarjeta */
.card .table tbody tr:last-child td {
  border-bottom: none;
}

/* Opcional: Alinear la cantidad a la derecha */
.card .table th:last-child,
.card .table td:last-child {
  text-align: right;
}

/* Opcional: Alinear el estado/categor칤a a la izquierda */
.card .table th:first-child,
.card .table td:first-child {
  text-align: left;
}

/* ===== FIN ESTILOS REPORTES ===== */

/* ===================================== */
/* 7) Estilos de Notificaciones          */
/* ===================================== */

.sidebar .nav a .badge {
    background-color: var(--red);
    color: #fff;
    font-size: 11px;
    font-weight: 700;
    padding: 3px 6px;
    border-radius: 999px;
    line-height: 1;
    margin-left: auto; /* Empuja el badge a la derecha */
}

/* ===== ESTILOS KANBAN ===== */
.kanban-board {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 16px;
    min-height: 400px;
}

.kanban-column {
    background: var(--bg);
    border-radius: 12px;
    padding: 0;
    display: flex;
    flex-direction: column;
}

.kanban-header {
    padding: 12px 14px;
    border-radius: 12px 12px 0 0;
    display: flex;
    align-items: center;
    justify-content: space-between;
    font-weight: 700;
}

.kanban-header h3 {
    margin: 0;
    font-size: 14px;
}

.kanban-header .badge {
    background: rgba(255, 255, 255, 0.9);
    color: var(--text);
    padding: 3px 8px;
    border-radius: 999px;
    font-size: 12px;
    font-weight: 700;
}

.kanban-cards {
    flex: 1;
    padding: 10px;
    display: flex;
    flex-direction: column;
    gap: 10px;
    overflow-y: auto;
    max-height: 500px;
}

.kanban-card {
    background: #fff;
    border: 1px solid var(--line);
    border-radius: 10px;
    padding: 12px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
    transition: box-shadow 0.2s, transform 0.2s;
    cursor: pointer;
}

.kanban-card:hover {
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    transform: translateY(-2px);
}

.kanban-empty {
    text-align: center;
    color: var(--muted);
    padding: 20px;
    font-size: 13px;
}

/* Responsive Kanban */
@media (max-width: 1400px) {
    .kanban-board {
        grid-template-columns: repeat(2, 1fr);
    }
}

@media (max-width: 768px) {
    .kanban-board {
        grid-template-columns: 1fr;
    }
}

/* ===== FIN ESTILOS KANBAN ===== */

/* Estilos para formularios */
.form-input, .form-select, .form-textarea {
    width: 100%;
    padding: 10px 12px;
    border: 1px solid var(--line);
    border-radius: 8px;
    font-family: inherit;
    font-size: 14px;
    transition: border-color 0.2s;
}

.form-input:focus, .form-select:focus, .form-textarea:focus {
    outline: none;
    border-color: var(--indigo-800);
}

.form-checkbox {
    width: 20px;
    height: 20px;
    cursor: pointer;
}

/* ===================================== */
/* 8) Perfil de usuario en sidebar       */
/* ===================================== */

/* Contenedor del usuario que se queda al fondo */
.user-section {
  margin-top: auto;
  background: var(--indigo-800);
  padding: 14px;
  border-top: 1px solid rgba(255, 255, 255, 0.1);
  position: relative;
  overflow: visible !important;
  z-index: 2000;
}

/* En desktop, hacerlo fixed */
@media (min-width: 769px) {
  .user-section {
    position: fixed;
    bottom: 0;
    left: 0;
    width: 244px;
    z-index: 1000;
  }
}

.user-profile {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 10px 12px;
    border-radius: 10px;
    transition: background 0.2s, transform 0.1s;
    cursor: pointer;
    user-select: none;
    position: relative;
}

.user-profile:hover {
    background: rgba(255, 255, 255, 0.12);
}

.user-profile:active {
    transform: scale(0.98);
}

.user-profile .avatar {
    width: 36px;
    height: 36px;
    border-radius: 8px;
    display: grid;
    place-items: center;
    font-weight: 700;
    color: #fff;
    font-size: 14px;
    flex-shrink: 0;
}

.user-info {
  flex: 1;
  min-width: 0;
  overflow: hidden;
}

.user-name {
  font-weight: 600;
  color: #fff;
  font-size: 14px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.user-role {
  font-size: 12px;
  opacity: 0.7;
  color: #fff;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.user-menu-icon {
    width: 18px;
    height: 18px;
    stroke: #fff;
    fill: none;
    stroke-width: 2;
    flex-shrink: 0;
}

.user-menu {
    background: #fff;
    border-radius: 10px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    margin-bottom: 8px;
    overflow: hidden;
    animation: slideUp 0.2s ease-out;
    position: absolute;
    bottom: 100%;
    left: 0;
    right: 0;
    z-index: 9999;
}

@keyframes slideUp {
    from {
        opacity: 0;
        transform: translateY(10px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.user-menu a {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 12px 14px;
    color: var(--text);
    text-decoration: none;
    transition: background 0.2s;
    font-size: 14px;
}

.user-menu a:hover {
    background: var(--bg);
}

.user-menu .menu-icon {
    width: 16px;
    height: 16px;
    stroke: currentColor;
    fill: none;
    stroke-width: 2;
}

.user-menu .logout-link {
    color: var(--red);
}

.user-menu .logout-link:hover {
    background: #fff5f5;
}

.user-menu form {
    margin: 0;
}

/* ===================================== */
/* 9) Men칰 de opciones de ticket         */
/* ===================================== */

.ticket-menu-wrapper {
    position: relative;
    display: inline-block;
}

.ticket-dropdown-menu {
    display: none;
    position: absolute;
    right: 0;
    top: 42px;
    background: #fff;
    border: 1px solid var(--line);
    border-radius: 10px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    overflow: hidden;
    z-index: 100;
    min-width: 180px;
    animation: slideDown 0.2s ease-out;
}

.ticket-menu-item {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 12px 14px;
    width: 100%;
    border: none;
    background: transparent;
    color: var(--text);
    text-decoration: none;
    transition: background 0.2s;
    font-size: 14px;
    cursor: pointer;
    text-align: left;
    font-family: inherit;
}

.ticket-menu-item:hover {
    background: var(--bg);
}

.ticket-menu-delete {
    color: var(--red);
}

.ticket-menu-delete:hover {
    background: #fff5f5;
}

/* ===================================== */
/* 10) Responsive - Mejoras para m칩viles */
/* ===================================== */

/* Bot칩n men칰 m칩vil (oculto por defecto) */
.mobile-menu-toggle {
    display: none;
    position: fixed;
    top: 12px;
    left: 12px;
    z-index: 1001;
    width: 44px;
    height: 44px;
    background: var(--indigo-800);
    border: none;
    border-radius: 10px;
    color: #fff;
    cursor: pointer;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
}

/* Overlay para cerrar sidebar (oculto por defecto) */
.sidebar-overlay {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.6);
    z-index: 999;
    opacity: 0;
    transition: opacity 0.3s ease;
}

.sidebar-overlay.active {
    display: block;
    opacity: 1;
}

@media (max-width: 768px) {
    /* Mostrar bot칩n de men칰 */
    .mobile-menu-toggle {
        display: block;
    }

    /* Sidebar fuera de pantalla */
    .sidebar {
        position: fixed;
        left: -280px;
        top: 0;
        bottom: 0;
        width: 260px;
        z-index: 1000;
        transition: left 0.3s ease;
        box-shadow: 4px 0 12px rgba(0, 0, 0, 0.15);
        padding: 18px 14px 14px;
        overflow-y: auto;
        overflow-x: visible;
        display: flex;
        flex-direction: column;
    }

    /* Agregar margen superior al logo en m칩vil para que no lo tape el bot칩n hamburguesa */
    .sidebar .brand {
        margin-top: 50px;
    }

    .sidebar.active {
        left: 0;
    }

    /* User section siempre visible al final del sidebar */
    .user-section {
        position: static !important;
        width: 100% !important;
        margin-top: auto;
        padding: 14px 0 0 0;
        left: auto !important;
        bottom: auto !important;
    }

    /* Layouts sin sidebar */
    .app.view-tickets {
        grid-template-columns: 1fr;
        grid-template-rows: auto 1fr;
        grid-template-areas:
            "header"
            "list";
    }

    .app.view-dashboard,
    .app.view-panel-principal {
        grid-template-columns: 1fr;
        grid-template-areas:
            "header"
            "main";
    }

    /* Header compacto */
    .header {
        padding: 14px 14px 14px 64px; /* Espacio para bot칩n men칰 */
        flex-direction: column;
        align-items: flex-start;
        gap: 12px;
        height: auto;
        min-height: 60px;
        position: sticky;
        top: 0;
        z-index: 100;
    }

    .page-title {
        font-size: 20px;
        margin: 0;
        line-height: 1.3;
    }

    .filters {
        width: 100%;
        flex-direction: column;
        gap: 8px;
    }

    .select {
        width: 100%;
        min-width: 100%;
    }

    .select select {
        font-size: 14px;
        padding: 10px 30px 10px 12px;
    }

    /* Tickets optimizados para m칩vil */
    .ticket {
        grid-template-columns: 44px 1fr;
        grid-template-rows: auto auto;
        gap: 0;
        padding: 14px;
        border-radius: 12px;
    }

    .ticket > div:first-child {
        /* Avatar visible */
        grid-row: 1 / 2;
        grid-column: 1 / 2;
        align-self: start;
    }

    .ticket > div:nth-child(2) {
        /* Contenido del ticket */
        grid-row: 1 / 2;
        grid-column: 2 / 3;
        min-width: 0;
    }

    .ticket-content {
        min-width: 0;
    }

    .ticket-title {
        font-size: 15px;
        line-height: 1.4;
        margin: 0 0 8px 0;
        font-weight: 700;
        color: var(--text);
    }

    .ticket-meta {
        display: flex;
        flex-direction: column;
        align-items: flex-start;
        gap: 6px;
        font-size: 13px;
        line-height: 1.4;
    }

    .ticket-meta .dot {
        display: none;
    }

    .ticket-meta > span {
        display: flex;
        align-items: center;
        gap: 6px;
        flex-wrap: wrap;
    }

    .ticket-actions {
        grid-column: 1 / -1;
        grid-row: 2 / 3;
        display: flex;
        justify-content: flex-end;
        align-items: center;
        padding-top: 12px;
        margin-top: 12px;
        border-top: 1px solid var(--line);
        gap: 8px;
    }

    .btn-link {
        padding: 10px 20px;
        font-size: 14px;
        min-width: 100px;
        font-weight: 600;
    }

    .btn-icon {
        width: 40px;
        height: 40px;
    }

    .avatar {
        width: 44px;
        height: 44px;
        font-size: 18px;
        border-radius: 10px;
    }

    .tag {
        font-size: 11px;
        padding: 5px 10px;
        font-weight: 700;
        border-width: 1.5px;
    }

    /* Lista */
    .list {
        padding: 14px;
        gap: 14px;
        height: auto;
        min-height: calc(100vh - 120px);
        overflow-y: auto;
    }

    /* FORZAR ocultar detail en m칩vil - nunca visible */
    .view-tickets .detail,
    .detail {
        display: none !important;
        visibility: hidden !important;
        opacity: 0 !important;
        width: 0 !important;
        height: 0 !important;
        overflow: hidden !important;
    }

    /* Cards del dashboard */
    .card {
        border-radius: 12px;
    }

    .card-head {
        padding: 12px;
        flex-direction: column;
        align-items: flex-start;
        gap: 8px;
    }

    .card-head h2 {
        font-size: 16px;
    }

    /* KPIs */
    .kpis {
        grid-template-columns: repeat(2, 1fr) !important;
        gap: 10px;
    }

    .kpi {
        padding: 12px;
    }

    .kpi-title {
        font-size: 12px;
    }

    .kpi-value {
        font-size: 24px;
    }

    /* Kanban */
    .kanban-board {
        grid-template-columns: 1fr !important;
        gap: 12px;
    }

    .kanban-cards {
        max-height: 400px;
    }

    /* Tablas responsive */
    .table {
        overflow-x: auto;
        padding: 8px;
    }

    .thead, .trow {
        grid-template-columns: 90px 1fr 100px !important;
        font-size: 12px;
        gap: 8px;
    }

    /* Ocultar columnas extras */
    .trow > div:nth-child(n+4),
    .thead > div:nth-child(n+4) {
        display: none;
    }

    /* Dashboard compacto */
    .dashboard {
        padding: 12px;
        gap: 12px;
    }

    .cards.two-col {
        grid-template-columns: 1fr;
    }

    /* Men칰 desplegable de ticket */
    .ticket-dropdown-menu {
        right: 0;
        min-width: 180px;
    }
}

@media (max-width: 480px) {
    /* Ajustes para pantallas muy peque침as */
    .page-title {
        font-size: 18px;
    }

    .filters {
        flex-direction: column;
    }

    .select {
        min-width: 100%;
    }

    .ticket {
        padding: 10px;
    }

    .ticket-title {
        font-size: 14px;
    }

    .ticket-meta {
        font-size: 12px;
    }

    .avatar {
        width: 32px;
        height: 32px;
        font-size: 14px;
    }

    .tag {
        font-size: 10px;
        padding: 3px 6px;
    }

    .btn-link {
        padding: 6px 12px;
        font-size: 12px;
        min-width: 80px;
    }

    /* KPIs en una columna */
    .kpis {
        grid-template-columns: 1fr !important;
    }

    /* Header m치s compacto */
    .header {
        padding: 10px 10px 10px 60px;
    }

    .mobile-menu-toggle {
        top: 10px;
        left: 10px;
        width: 40px;
        height: 40px;
    }

    /* Lista m치s compacta */
    .list {
        padding: 8px;
        gap: 10px;
    }
}